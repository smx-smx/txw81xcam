#include "sys_config.h"
#include "typesdef.h"
#include "lib/video/dvp/cmos_sensor/csi.h"
#include "tx_platform.h"
#include "list.h"
#include "dev.h"
#include "hal/i2c.h"

#if DEV_SENSOR_SP0A20


SENSOR_INIT_SECTION static const unsigned char SP0A20InitTable[CMOS_INIT_LEN]= 
{
  // ---- page 0 core ----
  0xfd,0x00,
  0x0c,0x01, 0x1b,0x27, 0x12,0x02, 0x13,0x2f, 0x6d,0x32, 0x6c,0x32,
  0x6f,0x33, 0x6e,0x34, 0x16,0x38, 0x17,0x38, 0x70,0x3a, 0x14,0x02,
  0x15,0x20, 0x71,0x23, 0x69,0x25, 0x6a,0x1a, 0x72,0x1c, 0x75,0x1e,
  0x73,0x3c, 0x74,0x21, 0x79,0x00, 0x77,0x10, 0x1a,0x4d, 0x1c,0x07,
  0x1e,0x15, 0x21,0x0e, 0x22,0x28, 0x26,0x66, 0x28,0x0b, 0x37,0x5a,
  // ---- pre-gain (page 2) ----
  0xfd,0x02,
  0x01,0x80, 0x52,0x10, 0x54,0x00,
  // ---- black level (page 1) ----
  0xfd,0x01,
  0x41,0x00, 0x42,0x00, 0x43,0x00, 0x44,0x00,
  // ---- timing baseline (page 0/1/2) ----
  0xfd,0x00,
  0x03,0x01, 0x04,0xc2, 0x05,0x00, 0x06,0x00, 0x07,0x00, 0x08,0x00,
  0x09,0x02, 0x0a,0xf4,
  0xfd,0x01,
  0xf0,0x00, 0xf7,0x4b, 0x02,0x0e, 0x03,0x01, 0x06,0x4b, 0x07,0x00,
  0x08,0x01, 0x09,0x00,
  0xfd,0x02,
  0xbe,0x1a, 0xbf,0x04, 0xd0,0x1a, 0xd1,0x04,
  // ---- base image tweaks (page 1/2) ----
  0xfd,0x01, 0x5a,0x40,
  0xfd,0x02, 0xbc,0x70, 0xbd,0x50, 0xb8,0x66, 0xb9,0x8f, 0xba,0x30, 0xbb,0x45,
  // ---- RPC / AE ranges (page 1) ----
  0xfd,0x01,
  0xe0,0x44, 0xe1,0x36, 0xe2,0x30, 0xe3,0x2a, 0xe4,0x2a, 0xe5,0x28,
  0xe6,0x28, 0xe7,0x26, 0xe8,0x26, 0xe9,0x26, 0xea,0x24, 0xf3,0x24, 0xf4,0x24,
  0x04,0xa0, 0x05,0x24, 0x0a,0xa0, 0x0b,0x24,                                     // indoor/outdoor min/max
  // ---- AE target / lock (page 1) ----
  0xfd,0x01,
  0xeb,0x78, 0xec,0x78, 0xed,0x05, 0xee,0x0c,
  // ---- misc & DP status (page 1/2) ----
  0xfd,0x01, 0xf2,0x4d,
  0xfd,0x02, 0x5b,0x05, 0x5c,0xa0,
  // ---- lens shading (page 1) ----
  0xfd,0x01,
  0x26,0x80, 0x27,0x4f, 0x28,0x00, 0x29,0x20, 0x2a,0x00, 0x2b,0x03,
  0x2c,0x00, 0x2d,0x20, 0x30,0x00, 0x31,0x00,
  // ---- LSC table 1 (page 1) ----
  0xfd,0x01,
  0xa1,0x31, 0xa2,0x33, 0xa3,0x2f, 0xa4,0x2f,
  0xa5,0x26, 0xa6,0x25, 0xa7,0x28, 0xa8,0x28,
  0xa9,0x23, 0xaa,0x23, 0xab,0x24, 0xac,0x24,
  0xad,0x0e, 0xae,0x0e, 0xaf,0x0e, 0xb0,0x0e,
  0xb1,0x00, 0xb2,0x00, 0xb3,0x00, 0xb4,0x00,
  0xb5,0x00, 0xb6,0x00, 0xb7,0x00, 0xb8,0x00,                                    // :contentReference[oaicite:1]{index=1}
  // ---- skin detect (page 2) ----
  0xfd,0x02, 0x08,0x00, 0x09,0x06, 0x1d,0x03, 0x1f,0x05,
  // ---- AWB core + presets (page 1/2/0/2) ----
  0xfd,0x01, 0x32,0x00,
  0xfd,0x02, 0x26,0xb8, 0x27,0xa3,
  0xfd,0x00, 0xe7,0x03, 0xe7,0x00,
  0xfd,0x02,
  0x10,0x00, 0x11,0x00, 0x1b,0x80, 0x1a,0x80, 0x18,0x27, 0x19,0x26,
  0x2a,0x00, 0x2b,0x00, 0x28,0xf8, 0x29,0x08,
  // D65
  0x66,0x43, 0x67,0x5e, 0x68,0xd2, 0x69,0xee, 0x6a,0xa5,
  // indoor
  0x7c,0x34, 0x7d,0x58, 0x7e,0xfb, 0x7f,0x1d, 0x80,0xa6,
  // CWF
  0x70,0x20, 0x71,0x41, 0x72,0x28, 0x73,0x47, 0x74,0xaa,
  // TL84
  0x6b,0x00, 0x6c,0x20, 0x6d,0x30, 0x6e,0x50, 0x6f,0xaa,
  // F
  0x61,0xf2, 0x62,0x13, 0x63,0x50, 0x64,0x70, 0x65,0x6a,
  0x75,0x80, 0x76,0x09, 0x77,0x02, 0x24,0x25, 0x0e,0x16, 0x3b,0x09,             // :contentReference[oaicite:2]{index=2}
  // ---- CCM (page 2) + color sat/UV/auto-sat/UV-th/low-lum ----
  0xfd,0x02, 0x15,0xc0, 0x16,0x8c,
  0xa0,0x86, 0xa1,0xfa, 0xa2,0x00, 0xa3,0xdb, 0xa4,0xc0, 0xa5,0xe6,
  0xa6,0xed, 0xa7,0xda, 0xa8,0xb9, 0xa9,0x0c, 0xaa,0x33, 0xab,0x0f,
  0xac,0x93, 0xad,0xe7, 0xae,0x06, 0xaf,0xda, 0xb0,0xcc, 0xb1,0xda,
  0xb2,0xda, 0xb3,0xda, 0xb4,0xcc, 0xb5,0x0c, 0xb6,0x33, 0xb7,0x0f,
  0xfd,0x01, 0xd3,0x66, 0xd4,0x6a, 0xd5,0x56, 0xd6,0x44, 0xd7,0x66, 0xd8,0x6a, 0xd9,0x56, 0xda,0x44,
  0xfd,0x01, 0xdd,0x30, 0xde,0x10, 0xdf,0xff, 0x00,0x00,
  0xfd,0x01, 0xc2,0xaa, 0xc3,0x88, 0xc4,0x77, 0xc5,0x66,
  0xfd,0x01, 0xcd,0x10, 0xce,0x1f, 0xcf,0x30, 0xd0,0x45,                          // :contentReference[oaicite:3]{index=3}
  // ---- GW, HEQ (page 2/1) ----
  0xfd,0x02, 0x31,0x60, 0x32,0x60, 0x33,0xc0, 0x35,0x60, 0x37,0x13,
  0xfd,0x01, 0x0e,0x80, 0x0f,0x20, 0x10,0x80, 0x11,0x80, 0x12,0x80, 0x13,0x80,
  0x14,0x88, 0x15,0x88, 0x16,0x88, 0x17,0x88,
  // ---- rotation (page 0) ----
  0xfd,0x00,  /* then either */ 0x31,0x00, /* or 0x31,0x06 if 180Â° needed */
  // ---- AUTO block + output enable ----
  0xfd,0x01, 0x32,0x15, 0x33,0xef, 0x34,0x07, 0xd2,0x01, 0xfb,0x25, 0xf2,0x49,
  0x35,0x40, 0x5d,0x11,
  0xfd,0x00, 0x1b,0x20,

-1,-1};

SENSOR_INIT_SECTION static const unsigned char SP0A20prewriteInitTable[CMOS_INIT_LEN] =
{
    0x12, 0x80, 0xFF, 0xFF,
};

SENSOR_OP_SECTION const _Sensor_Adpt_ sp0a20_cmd= 
{	
	.typ = 1, //YUV
	.pixelw = 640,
	.pixelh= 480,
	.hsyn = 1,
	.vsyn = 1,
	.rduline = 0,//
	.rawwide = 1,//10bit
	.colrarray = 2,//0:_RGRG_ 1:_GRGR_,2:_BGBG_,3:_GBGB_
	.init = (uint8 *)SP0A20InitTable,
    .preset = (uint8*)SP0A20prewriteInitTable,
	.rotate_adapt = {0},
	.hvb_adapt = {0x80,0x0a,0x80,0x0a},
	. mclk = 24000000,
	.p_fun_adapt = {NULL,NULL,NULL},
	.p_xc7016_adapt = {NULL},	
};

const _Sensor_Ident_ sp0a20_init=
{
	0x2B,0x42,0x43,0x01,0x01,0x02
};


#endif