#include "sys_config.h"
#include "typesdef.h"
#include "lib/video/dvp/cmos_sensor/csi.h"
#include "tx_platform.h"
#include "list.h"
#include "dev.h"
#include "hal/i2c.h"

#if DEV_SENSOR_HI704

SENSOR_INIT_SECTION static const unsigned char HI704InitTable[CMOS_INIT_LEN] =
{
// HI704 init table (from Apache02 gist)

	0x01,0xF1, 0x01,0xF3, 0x01,0xF1, 0x03,0x00, 0x11,0x90, 0x12,0x2C, 0x20,0x00, 0x21,0x02,
	0x22,0x00, 0x23,0x02, 0x24,0x01, 0x25,0xE0, 0x26,0x02, 0x27,0x80, 0x10,0x00, 0x11,0x83,
	0x43,0x91, 0x80,0x2E, 0x81,0x7E, 0x82,0x90, 0x83,0x30, 0x84,0x2C, 0x85,0x4B, 0x89,0x48,
	0x90,0x0B, 0x91,0x0B, 0x92,0x48, 0x93,0x48, 0x98,0x38, 0x99,0x40, 0xA0,0x00, 0xA8,0x40,
	0x03,0x02, 0x13,0x40, 0x14,0x04, 0x1A,0x00, 0x1B,0x08, 0x20,0x33, 0x21,0xAA, 0x22,0xA7,
	0x23,0x32, 0x3B,0x48, 0x50,0x21, 0x52,0xA2, 0x53,0x0A, 0x54,0x30, 0x55,0x10, 0x56,0x0C,
	0x59,0x0F, 0x60,0xCA, 0x61,0xDB, 0x62,0xCA, 0x63,0xDA, 0x64,0xCA, 0x65,0xDA, 0x72,0xCB,
	0x73,0xD8, 0x74,0xCB, 0x75,0xD8, 0x80,0x02, 0x81,0xBD, 0x82,0x24, 0x83,0x3E, 0x84,0x24,
	0x85,0x3E, 0x92,0x72, 0x93,0x8C, 0x94,0x72, 0x95,0x8C, 0xA0,0x03, 0xA1,0xBB, 0xA4,0xBB,
	0xA5,0x03, 0xA8,0x44, 0xA9,0x6A, 0xAA,0x92, 0xAB,0xB7, 0xB8,0xC9, 0xB9,0xD0, 0xBC,0x20,
	0xBD,0x28, 0xC0,0xDE, 0xC1,0xEC, 0xC2,0xDE, 0xC3,0xEC, 0xC4,0xE0, 0xC5,0xEA, 0xC6,0xE0,
	0xC7,0xEA, 0xC8,0xE1, 0xC9,0xE8, 0xCA,0xE1, 0xCB,0xE8, 0xCC,0xE2, 0xCD,0xE7, 0xCE,0xE2,
	0xCF,0xE7, 0xD0,0xC8, 0xD1,0xEF, 0x03,0x10, 0x10,0x03, 0x11,0x43, 0x12,0x30, 0x40,0x80,
	0x41,0x10, 0x48,0x84, 0x50,0x48, 0x60,0x7F, 0x61,0x00, 0x62,0x90, 0x63,0xA0, 0x64,0x48,
	0x66,0x90, 0x67,0x36, 0x03,0x11, 0x10,0x25, 0x11,0x1F, 0x20,0x00, 0x21,0x38, 0x23,0x0A,
	0x60,0x0A, 0x61,0x82, 0x62,0x00, 0x63,0x83, 0x64,0x83, 0x67,0xF0, 0x68,0x30, 0x69,0x10,
	0x03,0x12, 0x40,0xE9, 0x41,0x09, 0x50,0x18, 0x51,0x24, 0x70,0x1F, 0x71,0x00, 0x72,0x00,
	0x73,0x00, 0x74,0x10, 0x75,0x10, 0x76,0x20, 0x77,0x80, 0x78,0x88, 0x79,0x18, 0xB0,0x7D,
	0x03,0x13, 0x10,0x01, 0x11,0x89, 0x12,0x14, 0x13,0x19, 0x14,0x08, 0x20,0x06, 0x21,0x04,
	0x23,0x30, 0x24,0x33, 0x25,0x08, 0x26,0x18, 0x27,0x00, 0x28,0x08, 0x29,0x50, 0x2A,0xE0,
	0x2B,0x10, 0x2C,0x28, 0x2D,0x40, 0x2E,0x00, 0x2F,0x00, 0x30,0x11, 0x80,0x03, 0x81,0x07,
	0x90,0x06, 0x91,0x04, 0x92,0x00, 0x93,0x20, 0x94,0x42, 0x95,0x60, 0x03,0x14, 0x10,0x01,
	0x20,0x80, 0x21,0x80, 0x22,0x66, 0x23,0x50, 0x24,0x44, 0x03,0x15, 0x10,0x0E, 0x14,0x38,
	0x16,0x20, 0x17,0x2F, 0x30,0x4C, 0x31,0x0C, 0x32,0x00, 0x33,0x26, 0x34,0x80, 0x35,0x1A,
	0x36,0x20, 0x37,0x80, 0x38,0xE0, 0x40,0x12, 0x41,0xA0, 0x42,0x0E, 0x43,0x84, 0x44,0x08,
	0x45,0x84, 0x46,0x8A, 0x47,0x02, 0x48,0x08, 0x03,0x16, 0x30,0x00, 0x31,0x0A, 0x32,0x1B,
	0x33,0x2E, 0x34,0x5C, 0x35,0x79, 0x36,0x95, 0x37,0xA4, 0x38,0xB1, 0x39,0xBD, 0x3A,0xC8,
	0x3B,0xD9, 0x3C,0xE8, 0x3D,0xF5, 0x3E,0xFF, 0x03,0x17, 0xC4,0x3C, 0xC5,0x32, 0x03,0x20,
	0x10,0x0C, 0x11,0x04, 0x20,0x01, 0x28,0x27, 0x29,0xA1, 0x2A,0xF0, 0x2B,0x34, 0x2C,0x2B,
	0x30,0xF8, 0x39,0x22, 0x3A,0xDE, 0x3B,0x22, 0x3C,0xDE, 0x60,0x95, 0x68,0x3C, 0x69,0x64,
	0x6A,0x28, 0x6B,0xC8, 0x70,0x42, 0x76,0x22, 0x77,0x02, 0x78,0x12, 0x79,0x27, 0x7A,0x23,
	0x7C,0x1D, 0x7D,0x22, 0x83,0x00, 0x84,0xAF, 0x85,0xC8, 0x86,0x00, 0x87,0xFA, 0x88,0x02,
	0x89,0xBF, 0x8A,0x20, 0x8B,0x3A, 0x8C,0x98, 0x8D,0x30, 0x8E,0xD4, 0x91,0x02, 0x92,0xDC,
	0x93,0x6C, 0x94,0x01, 0x95,0xB7, 0x96,0x74, 0x98,0x8C, 0x99,0x23, 0x9C,0x0B, 0x9D,0x3B,
	0x9E,0x00, 0x9F,0xFA, 0xB1,0x14, 0xB2,0x50, 0xB4,0x14, 0xB5,0x38, 0xB6,0x26, 0xB7,0x20,
	0xB8,0x1D, 0xB9,0x1B, 0xBA,0x1A, 0xBB,0x19, 0xBC,0x19, 0xBD,0x18, 0xC0,0x1A, 0xC3,0x48,
	0xC4,0x48, 0x03,0x22, 0x10,0xE2, 0x11,0x26, 0x21,0x40, 0x30,0x80, 0x31,0x80, 0x38,0x12,
	0x39,0x33, 0x40,0xF0, 0x41,0x33, 0x42,0x33, 0x43,0xF3, 0x44,0x55, 0x45,0x44, 0x46,0x02,
	0x80,0x45, 0x81,0x20, 0x82,0x40, 0x83,0x52, 0x84,0x1B, 0x85,0x50, 0x86,0x25, 0x87,0x4D,
	0x88,0x38, 0x89,0x3E, 0x8A,0x29, 0x8B,0x02, 0x8D,0x22, 0x8E,0x71, 0x8F,0x63, 0x90,0x60,
	0x91,0x5C, 0x92,0x56, 0x93,0x52, 0x94,0x4C, 0x95,0x36, 0x96,0x31, 0x97,0x2E, 0x98,0x2A,
	0x99,0x29, 0x9A,0x26, 0x9B,0x09, 0x03,0x22, 0x10,0xFB, 0x03,0x20, 0x10,0x9C, 0x01,0xF0,
	0x03,0x10, 0x11,0x03, 0x12,0x30, 0x13,0x00, 0x44,0x80, 0x45,0x80, 0x47,0x7F, 0xD3,0x13,
	0x20,0x06, 0x21,0x04, 0x41,0x10, 0x03,0x10, 0x11,0x03, 0x12,0x30, 0x13,0x00, 0x44,0x80,
	0x45,0x80, 0x47,0x7F, 0xD3,0x13, 0x20,0x06, 0x21,0x04, 0x41,0x10, 0x03,0x00, 0x11,0x90,

};



SENSOR_OP_SECTION const _Sensor_Adpt_ hi704_cmd= 
{	
	.typ = 1, //YUV
	.pixelw = 640,
	.pixelh= 480,
	.hsyn = 1,
	.vsyn = 0,
	.rduline = 0,//
	.rawwide = 1,//10bit
	.colrarray = 2,//0:_RGRG_ 1:_GRGR_,2:_BGBG_,3:_GBGB_
	.init = (uint8 *)HI704InitTable,
	.rotate_adapt = {0},
	.hvb_adapt = {0x80,0x0a,0x80,0x0a},
	. mclk = 24000000,
	.p_fun_adapt = {NULL,NULL,NULL},
	.p_xc7016_adapt = {NULL},	
};

const _Sensor_Ident_ hi704_init =
{
    /* id    , w_cmd, r_cmd, addr_num, data_num, id_reg */
    0x96,0x60,0x61,0x01,0x01,0x04
};


#endif


